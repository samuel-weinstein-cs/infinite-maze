<html>
	<canvas id="myCanvas" width="726" height="726" style="border:1px solid #000000;"></canvas>
	<script type="text/javascript">
			window.onerror=function(msg, url, linenumber){
			 alert('Error message: '+msg+'\nURL: '+url+'\nLine Number: '+linenumber)
			 return true
			}
	</script>
	<script src=http://cdnjs.cloudflare.com/ajax/libs/seedrandom/2.4.0/seedrandom.min.js></script>
	<script>
Array.prototype.containsArray = function(val) {
    var hash = {};
    for(var i=0; i<this.length; i++) {
        hash[this[i]] = i;
    }
    return hash.hasOwnProperty(val);
}
var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");
function randint(min, max){
 return Math.floor(Math.random() * (max - min + 1)) + min;
}
function dir(d){
	var x=0;
	var y=0;
	if (d==0){
		y=-1;
	}
	if (d==1){
		x=1;
	}
	if (d==2){
		y=1;
	}
	if (d==3){
		x=-1;
	}
	return [x, y]
}
function invd(d){
	if (d==0){
		d=2;
	}
	else if (d==1){
		d=3;
	}
	else if (d==2){
		d=0;
	}
	else if (d==3){
		d=1;
	}
	return d;
}
var s='test'
		

Math.seedrandom('0 0 est');
function generate(){
	var closed=[]
	var maze=
[[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],
[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],
[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],
[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],
[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]];
	var finished=false;
	var f=false;
	x=randint(0,4);
	y=randint(0,4);
	if (finished == false){
	interval = setInterval(function(){
	if (finished == true){
		clearInterval(interval);
		draw(maze);
	}
	for (a=0; a<5; a++){
		if(!maze[a].containsArray([0,0,0,0])){
			f=true;
		} else {
			f=false;
		}
	}
	finished=f;
	di=randint(0,3);
	if (!((x+dir(di)[0]<0 || x+dir(di)[0]>4)||(y+dir(di)[1]<0 || y+dir(di)[1]>4))){
		if(maze[y+dir(di)[1]][x+dir(di)[0]]=='0,0,0,0'){
						
			d=dir(di);
			maze[y][x][di]=1;
			//alert(x+' '+y+' '+maze[y][x]);
			x+=d[0];
			y+=d[1];
			var xy=[x,y];
			alert(x);
			alert(y);
			closed.push(xy);
			maze[y][x][invd(di)]=1;
			//alert(x+' '+y+' '+maze[y][x]);

		}
	} else {
		di=randint(0,3);
		if ((maze[y+dir(0)[1]][x+dir(0)[0]]!='0,0,0,0')&&(maze[y+dir(1)[1]][x+dir(1)[0]]!='0,0,0,0')&&(maze[y+dir(2)[1]][x+dir(2)[0]]!='0,0,0,0')&&(maze[y+dir(3)[1]][x+dir(3)[0]]!='0,0,0,0')) {
			closed.pop();
			x=closed[closed.length][0];
			y=closed[closed.length][1];
		}
	}
	}, 1);}
}
generate();
function draw(m){
	var size=50;
	JSON.stringify(m);
	var c=document.getElementById("myCanvas");
	var ctx=c.getContext("2d");
	for (i=0; i<5; i++){
		for (j=0; j<5; j++){
			ctx.lineWidth = 2;
			if (m[j][i][0]==0){
				ctx.moveTo(i*size,j*size);
				ctx.lineTo((i+1)*size,j*size);
			}
			ctx.stroke();
			if (m[j][i][1]==0){
				ctx.moveTo((i+1)*size,j*size);
				ctx.lineTo((i+1)*size,(j+1)*size);
			}
			ctx.stroke();
			if (m[j][i][2]==0){
				ctx.moveTo(i*size,(j+1)*size);
				ctx.lineTo((i+1)*size,(j+1)*size);
			}
			ctx.stroke();
			if (m[j][i][1]==0){
				ctx.moveTo(i*size,j*size);
				ctx.lineTo(i*size,(j+1)*size);
			}
			ctx.stroke();

		}
	}
}


	</script>
</html>
